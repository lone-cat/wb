"use strict";(self.webpackChunkwb=self.webpackChunkwb||[]).push([[179],{2227:(e,t,r)=>{var n=r(5893),s=r(745),o=r(7294),i=(r(9701),r(2162),r(8247),r(4877),r(3379)),a=r.n(i),l=r(7795),c=r.n(l),d=r(569),u=r.n(d),h=r(3565),p=r.n(h),x=r(9216),m=r.n(x),g=r(4589),f=r.n(g),v=r(1424),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=u().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=m(),a()(v.Z,y),v.Z&&v.Z.locals&&v.Z.locals;const j={},w=function*(){for(;;)yield"ev"+String(Date.now())+String(Math.random()*Number.MAX_SAFE_INTEGER)}(),b=(e,t)=>{void 0===j[e]&&(j[e]={});const r=w.next().value;return j[e][r]=t,()=>{delete j[e][r],0===Object.keys(j[e]).length&&delete j[e]}},I=(e,t)=>{if(void 0===j[e])return;const r=j[e];Object.keys(r).forEach((e=>{r[e](t)}))},S=e=>e.reduce(((e,t)=>(e[t]=t,e)),{}),C=S(["API_CLIENT_READY","API_STATISTICS_CLIENT_READY"]);class k extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Ошибка сети")}}class T extends k{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Таймаут запроса")}}class Z extends k{constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Неспецифический код HTTP ответа"),this.serverResponse=e}}class E extends Z{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Неизвестная ошибка сервера")}}class O extends Z{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Неизвестная ошибка запроса")}}class P extends O{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Некорректный запрос")}}class A extends O{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Пользователь не аутентифицирован")}}class D extends O{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Доступ запрещен")}}class R extends O{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ресурс не найден")}}class G extends E{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Внутренняя ошибка сервера")}}class M extends E{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сервер временно не доступен")}}class B extends E{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сервер не отвечает")}}class _ extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Ответ сервера имеет неверный формат")}}const N={},H=(15e3,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Object.assign(Object.assign({},N),t);return new Promise(((t,n)=>{let s=!1;const o=setTimeout((()=>{s=!0,n(new T)}),15e3);return fetch(e,r).finally((()=>{s||clearTimeout(o)})).then((e=>t(e))).catch((()=>{n(new k)}))})).then((e=>{if(e.ok&&200===e.status)return e;if(400===e.status)throw new P(e);if(401===e.status)throw new A(e);if(403===e.status)throw new D(e);if(404===e.status)throw new R(e);if(500===e.status)throw new G(e);if(502===e.status)throw new B(e);if(503===e.status)throw new M(e);if(e.status>=500)throw new E(e);if(e.status>=400)throw new O(e);throw new Z(e)}))});const z=(e,t)=>{const r=e.split("?");if(r.length>2)throw new Error("invalid uri passed for buildQueryString");let n;n=2===r.length?Object.assign(Object.assign({},L(r[1])),t):Object.assign({},t);const s=q(n);return s?r[0]+"?"+s:r[0]},L=e=>{const t={},r=e.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(n.length>2)throw new Error("invalid query passed for convertQueryToObject");const s=decodeURIComponent(n[0]);2===n.length?t[s]=decodeURIComponent(n[1]):t[s]=""}return t},q=e=>{const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++)t.push(encodeURIComponent(r[n])+"="+encodeURIComponent(e[r[n]]));return t.join("&")},F=(e,t)=>t?Object.assign(Object.assign({},e),{Authorization:t}):e;class K{constructor(e){this.host="",this.token="",this.readinessPublishFunc=e}hasToken(){return Boolean(this.token)}hasHost(){return Boolean(this.host)}hasSufficientData(){return this.hasToken()&&this.hasHost()}setToken(e){this.token=e,this.readinessPublishFunc(this.hasSufficientData())}getToken(){if(!this.hasToken())throw new Error("Токен не задан!");return this.token}setHost(e){this.host=e,this.readinessPublishFunc(this.hasSufficientData())}getHost(){if(!this.hasHost())throw new Error("Адрес сервера не задан!");return this.host}getJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=F({"Content-type":"application/json"},this.getToken());return((e,t,r)=>{const n={method:"GET",headers:t};return H(z(e,r),n)})(this.getHost()+e,r,t).then((e=>e.json().catch((()=>{throw new _}))))}postJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=F({"Content-type":"application/json"},this.getToken());return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={method:"POST",headers:t,body:JSON.stringify(r)};return H(e,n)}(this.getHost()+e,r,t).then((e=>e.json().catch((()=>{throw new _}))))}deleteJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=F({"Content-type":"application/json"},this.getToken());return((e,t,r)=>{const n={method:"DELETE",headers:t};return H(z(e,r),n)})(this.getHost()+e,r,t).then((e=>e.json().catch((()=>{throw new _}))))}}const J=function*(){let e=0,t=0,r=0;for(;;)yield"".concat((new Date).getTime(),"-").concat(r,"-").concat(t,"-",0),e++,e===Number.MAX_SAFE_INTEGER&&(t++,e=0),t===Number.MAX_SAFE_INTEGER&&(r++,t=0),r===Number.MAX_SAFE_INTEGER&&(r=0)}(),U=()=>J.next().value,Q=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;this.intervalGenerator=e,this.groupIdGenerator=t,this.queue=[],this.timeoutHandler=null}addTasks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.groupIdGenerator();const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=this.addTask(s,t);r.push(o)}return Promise.all(r).catch((e=>{throw this.rejectTasksById(t),e}))}rejectTasksById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Error("group task fail");const r=this.queue.filter((t=>t.groupId===e)),n=r.length;return r.forEach((e=>{e.task.fail(t)})),this.queue=this.queue.filter((t=>t.groupId!==e)),n}addTask(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.groupIdGenerator(),n=()=>{};const s=new Promise(((e,r)=>{t=e,n=r}));return this.pushToQueue({task:{run:()=>{t(e())},fail:n},groupId:r}),s}pushToQueue(){this.queue.length<1&&null===this.timeoutHandler&&setTimeout((()=>{this.runTask()}),100),this.queue.push(...arguments)}runTask(){if(null!==this.timeoutHandler)return;const e=this.queue.shift();e?(e.task.run(),this.timeoutHandler=setTimeout((()=>{this.timeoutHandler=null,this.runTask()}),this.intervalGenerator())):this.timeoutHandler=null}},W=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;this.intervalGenerator=e,this.groupIdGenerator=t,this.queueMap={}}addTask(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.groupIdGenerator();return this.ensureQueueMapHasKey(e),this.queueMap[e].addTask(t,r).catch((e=>{throw this.rejectTasksById(r,new Error("group task fail")),e}))}addTasks(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.groupIdGenerator();return this.ensureQueueMapHasKey(e),this.queueMap[e].addTasks(t,r).catch((e=>{throw this.rejectTasksById(r),e}))}rejectTasksById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Error("group task fail");return Object.keys(this.queueMap).reduce(((r,n)=>r+this.queueMap[n].rejectTasksById(e,t)),0)}ensureQueueMapHasKey(e){this.queueMap[e]||(this.queueMap[e]=new Q(this.intervalGenerator,this.groupIdGenerator))}},Y=function*(){for(;;)yield 3e3*Math.random()+2e3}(),V=S(["STANDARD","STATISTICS"]),X=new class{constructor(e,t,r){this.apiQueueMap={[V.STANDARD]:new W(e,r),[V.STATISTICS]:new W(t,r)},this.generateString=r}addTask(e){const t=this.generateString();return this.apiQueueMap[e.apiType].addTask(e.apiRouteGroup,e.task,t)}addTasks(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)return Promise.resolve([]);const n=this.generateString(),s=t.map((e=>this.apiQueueMap[e.apiType].addTask(e.apiRouteGroup,e.task,n)));return Promise.all(s).catch((e=>{throw Object.keys(this.apiQueueMap).forEach((e=>this.apiQueueMap[e].rejectTasksById(n))),e}))}}((()=>Y.next().value),(()=>6e4),U),$=X,ee=new K((e=>{I(C.API_CLIENT_READY,e)})),te=new K((e=>{I(C.API_STATISTICS_CLIENT_READY,e)})),re={apiType:V.STANDARD,apiRouteGroup:""},ne={apiType:V.STATISTICS},se="apiKey",oe="apiStatisticsKey",ie="host",ae="statisticsHost",le=()=>{var e;return null!==(e=localStorage.getItem(se))&&void 0!==e?e:""},ce=()=>{var e;return null!==(e=localStorage.getItem(oe))&&void 0!==e?e:""},de=()=>{var e;return null!==(e=localStorage.getItem(ie))&&void 0!==e?e:"https://suppliers-api.wildberries.ru"},ue=()=>{var e;return null!==(e=localStorage.getItem(ae))&&void 0!==e?e:"https://statistics-api.wildberries.ru"},he=o.createContext({apiKey:"",setApiKey:()=>{},apiStatisticsKey:"",setApiStatisticsKey:()=>{},serverAddr:"",setServerAddr:()=>{},statisticsServerAddr:"",setStatisticsServerAddr:()=>{},apiClientReady:!1,setApiClientReady:()=>{},apiStatisticsClientReady:!1,setApiStatisticsClientReady:()=>{}}),pe=e=>{let{children:t=null}=e;const[r,s]=(0,o.useState)(le),[i,a]=(0,o.useState)(ce),[l,c]=(0,o.useState)(de),[d,u]=(0,o.useState)(ue),[h,p]=(0,o.useState)(!1),[x,m]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var e;ee.setToken(r),e=r,localStorage.setItem(se,e)}),[r]),(0,o.useEffect)((()=>{var e;te.setToken(i),e=i,localStorage.setItem(oe,e)}),[i]),(0,o.useEffect)((()=>{var e;ee.setHost(l),e=l,localStorage.setItem(ie,e)}),[l]),(0,o.useEffect)((()=>{var e;te.setHost(d),e=d,localStorage.setItem(ae,e)}),[d]),(0,o.useEffect)((()=>{const e=b(C.API_CLIENT_READY,(e=>{p(e)})),t=b(C.API_STATISTICS_CLIENT_READY,(e=>{m(e)}));return p(ee.hasSufficientData()),m(te.hasSufficientData()),()=>{e(),t()}}),[b,C,p,m]);const g=(0,o.useMemo)((()=>({apiKey:r,setApiKey:s,apiStatisticsKey:i,setApiStatisticsKey:a,serverAddr:l,setServerAddr:c,statisticsServerAddr:d,setStatisticsServerAddr:u,apiClientReady:h,setApiClientReady:p,apiStatisticsClientReady:x,setApiStatisticsClientReady:m})),[r,i,l,d,h,x,s,a,c,u,p,m]);return(0,n.jsx)(he.Provider,{value:g,children:t})},xe=o.memo(pe),me=()=>(0,o.useContext)(he);var ge=r(9655),fe=r(9250),ve=r(344);const ye={data:{headers:{},rows:[]},setData:()=>{}},je=o.createContext(ye),we=e=>{let{children:t}=e;const[r,s]=(0,o.useState)(ye.data),i=(0,o.useMemo)((()=>({data:r,setData:s})),[r,s]);return(0,n.jsx)(je.Provider,{value:i,children:t})},be=o.memo(we),Ie=()=>(0,o.useContext)(je);var Se=r(7582),Ce=r(4680),ke=r(7896),Te=r(9573),Ze=r(6011),Ee=r(3694),Oe=r(6926),Pe=r(8732),Ae=r(3863),De=r(268);const Re=[{label:"25",value:25},{label:"100",value:100},{label:"250",value:250},{label:"Все",value:-1}],Ge=e=>{let{data:t,orderedColumnIds:r}=e;const[s,i]=o.useState(0),[a,l]=o.useState(25),c=(0,o.useCallback)(((e,t)=>{i(t-1)}),[i]),d=(0,o.useCallback)((e=>{l(+e.target.value),i(0)}),[l,i]),{headers:u,rows:h}=t;(0,o.useEffect)((()=>{i(0)}),[t]);const p=Math.ceil(h.length/a),x=s>p?p:s,m=x+1;return(0,n.jsxs)(ve.Z,{container:!0,sx:{flexDirection:"column",flexGrow:1,width:"100%"},children:[(0,n.jsx)(ve.Z,{sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%"},children:(0,n.jsx)(Ce.Z,{variant:"outlined",sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,n.jsx)(ke.Z,{sx:{flexGrow:1,flexShrink:1,flexBasis:"10rem",height:"100%",width:"100%"},children:(0,n.jsxs)(Te.Z,{stickyHeader:!0,size:"small",children:[(0,n.jsx)(Ze.Z,{children:(0,n.jsxs)(Ee.Z,{children:[(0,n.jsx)(Oe.Z,{style:{textAlign:"right"},children:"№"}),r.map((e=>(0,n.jsx)(Oe.Z,{children:u[e].name},e)))]})}),(0,n.jsx)(Pe.Z,{children:h.slice(x*a,x*a+a).map(((e,t)=>(0,n.jsxs)(Ee.Z,{hover:!0,children:[(0,n.jsx)(Oe.Z,{style:{textAlign:"right"},children:t+x*a+1}),r.map((r=>{const s=u[r],o=s.toPrintable?s.toPrintable(e[r]):e[r];return(0,n.jsx)(Oe.Z,{children:o},String(t)+r)}))]},t)))})]})})})}),(0,n.jsx)(ve.Z,{sx:{flexGrow:0,width:"100%"},children:(0,n.jsx)(Ae.Z,{rowsPerPageOptions:Re,component:"div",count:h.length,rowsPerPage:a,page:x,onPageChange:c,onRowsPerPageChange:d,labelRowsPerPage:"Показывать:",labelDisplayedRows:e=>{let{from:t,to:r,count:n}=e;return"".concat(t," - ").concat(r," из ").concat(-1!==n?n:">".concat(r))},ActionsComponent:e=>{const{page:t,count:r,rowsPerPage:s,showLastButton:o,getItemAriaLabel:i,showFirstButton:a,onPageChange:l}=e;return(0,Se._T)(e,["page","count","rowsPerPage","showLastButton","getItemAriaLabel","showFirstButton","onPageChange"]),(0,n.jsx)(De.Z,{siblingCount:2,boundaryCount:1,count:p,page:m,onChange:c,sx:{"& ul":{display:"flex",flexWrap:"nowrap"}}})}})})]})};var Me=r(2574),Be=r(4295),_e=r.n(Be);const Ne=/^[^./\\]{1,}$/,He=/^[^./\\]{1,}\.xlsx$/i,ze=e=>{const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++)t.push(Object.assign({id:r[n]},e[r[n]]));return t.sort(((e,t)=>{if(void 0!==e.order&&void 0!==t.order){if(e.order<t.order)return-1;if(t.order<e.order)return 1}return e.name<t.name?-1:t.name<e.name?1:0})),t.map((e=>e.id))},Le=e=>{var t;const{filename:r="без_имени",headers:n,rows:s}=e,o=ze(n),i=new(_e().Workbook),a=i.addWorksheet("Лист 1"),l={style:"thin",color:"black"};a.columns=o.map((e=>({key:e,header:n[e].name,width:-1}))),a.getRow(1).eachCell((e=>{e.style={border:{top:l,left:l,right:l,bottom:l},alignment:{vertical:"middle",horizontal:"center",wrapText:!0},font:{bold:!0}}})),a.addRows(s.map((e=>{const t={};for(let r=0;r<o.length;r++){const s=o[r],i=n[s];t[s]=i.toExcel?i.toExcel(e[s]):e[s]}return t})));const c={};for(let e=0;e<o.length;e++)c[o[e]]=null!==(t=n[o[e]].width)&&void 0!==t?t:"auto";return Je(a,c),((e,t)=>{let r=t;return r.match(Ne)||r.match(He)||(r="invalid_file_name"),r.match(Ne)&&(r+=".xlsx"),e.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");return n.href=URL.createObjectURL(t),n.download=r,n.click(),URL.revokeObjectURL(n.href),!0}))})(i.xlsx,r)},qe=Le,Fe=new Q((()=>1e3)),Ke=e=>Fe.addTask((()=>Le(e))),Je=(e,t)=>{e.columns.forEach((e=>{const r=t[e.key];if("auto"!==r)return void(e.width=r);const n=e.values.map((e=>e.toString().length)),s=Math.max(...n.filter((e=>"number"==typeof e)));e.width=s+6}))},Ue=new Error("exporter is not ready"),Qe={exportNow:()=>Promise.reject(Ue),exportEnqueue:()=>Promise.reject(Ue)},We=o.createContext(Qe),Ye=e=>{let{children:t}=e;const r=(0,o.useMemo)((()=>({exportNow:qe,exportEnqueue:Ke})),[qe,Ke]);return(0,n.jsx)(We.Provider,{value:r,children:t})},Ve=o.memo(Ye),Xe=()=>(0,o.useContext)(We),$e=e=>{let{data:t}=e;const{exportEnqueue:r}=Xe();return(0,n.jsx)(Me.Z,{onClick:()=>{r(t)},children:"выгрузить в excel"})},et=e=>{let{data:t}=e;const{headers:r}=t,s=(0,o.useMemo)((()=>ze(r)),[r]);return(0,n.jsxs)(ve.Z,{container:!0,sx:{flexDirection:"column",flexGrow:1},children:[(0,n.jsx)(ve.Z,{container:!0,sx:{flexDirection:"column",flexGrow:1,width:"100%"},children:(0,n.jsx)(Ge,{data:t,orderedColumnIds:s})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)($e,{data:t})})]})},tt=()=>{const{data:e}=Ie();return(0,n.jsx)(et,{data:e})};var rt=r(2433),nt=r(2658),st=r(2599);const ot=()=>{const e=Cr(),{items:t}=(e=>{const t=(0,fe.UO)(),r=(0,fe.TH)(),n=(0,fe.HJ)(),s=(0,o.useMemo)((()=>n.location?n.location.pathname:r.pathname),[n.location,r.pathname]),i=(0,o.useMemo)((()=>e.map((e=>{var t;const r=null!==(t=e.defaultParams)&&void 0!==t?t:{},n=(0,st.Gn)(e.path,r);return Object.assign(Object.assign({},e),{pattern:e.path,defaultParams:r,path:n})}))),[e]),a=(0,o.useMemo)((()=>i.map((e=>{const r=(0,st.Gn)(e.pattern,Object.assign(Object.assign({},e.defaultParams),t)),n=Boolean((0,st.LX)(r,s));return Object.assign(Object.assign({},e),{active:n})}))),[i,s,n]),l=(0,o.useMemo)((()=>a.map((e=>Object.assign(Object.assign({},e),{previous:e.path===r.pathname})))),[a,s,n]),{activeItem:c,activeIndex:d}=(0,o.useMemo)((()=>{for(let e=0;e<l.length;e++)if(l[e].active)return{activeItem:l[e],activeIndex:e};return{activeItem:null,activeIndex:null}}),[l]);return{items:l,active:c,index:d}})(e);return(0,n.jsx)(ve.Z,{container:!0,sx:{backgroundColor:"primary.main",color:"primary.contrastText",px:2},children:t.map((e=>{const t=e.active;return(0,n.jsx)(rt.Z,{component:t?"div":ge.OL,to:t?void 0:e.path,children:(0,n.jsx)(nt.Z,{variant:"inherit",children:e.name})},e.path)}))})};var it=r(3906);const at=()=>((0,fe.lk)(),(0,n.jsxs)(nt.Z,{variant:"h6",children:["Что то пошло не так...",(0,n.jsx)(ge.OL,{to:"/",children:"На главную"})]}));var lt=r(9542);const ct=()=>{const{apiKey:e,setApiKey:t,apiStatisticsKey:r,setApiStatisticsKey:s,serverAddr:o,setServerAddr:i,statisticsServerAddr:a,setStatisticsServerAddr:l}=me();return(0,n.jsxs)(ve.Z,{container:!0,spacing:2,sx:{flexDirection:"column",justifyContent:"center"},children:[(0,n.jsx)(ve.Z,{children:(0,n.jsx)(lt.Z,{label:"Api ключ",value:e,onChange:e=>{t(e.target.value)},error:!e})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(lt.Z,{label:"Api ключ статистики",value:r,onChange:e=>{s(e.target.value)},error:!r})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(lt.Z,{label:"Адрес сервера",value:o,onChange:e=>{i(e.target.value)},error:!o})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(lt.Z,{label:"Адрес сервера статистики",value:a,onChange:e=>{l(e.target.value)},error:!a})})]})},dt="cards",ut={cards:{fromList:[],byVendorIds:[]},setCards:()=>{},busy:!0,setBusy:()=>{}},ht=o.createContext(ut),pt=e=>{let{children:t}=e;const[r,s]=(0,o.useState)(!1),[i,a]=(0,o.useState)((()=>{const e=localStorage.getItem(dt);if(e)try{return JSON.parse(e)}catch(e){return ut.cards}return ut.cards})),l=(0,o.useMemo)((()=>({cards:i,setCards:a,busy:r,setBusy:s})),[i,a,r,s]);return(0,o.useEffect)((()=>{localStorage.setItem(dt,JSON.stringify(i))}),[i]),(0,n.jsx)(ht.Provider,{value:l,children:t})},xt=o.memo(pt),mt=()=>(0,o.useContext)(ht),gt={wbId:{name:"Артикул WB",toPrintable:e=>e.toString()},supplierId:{name:"Артикул поставщика"},sizeWb:{name:"Размер"},barcode:{name:"Штрихкод"}},ft=e=>{let{cards:t}=e;const{setData:r}=Ie(),s=(0,o.useCallback)((()=>{const e=t.byVendorIds.reduce(((e,t)=>(e.push(...t.sizes.map((e=>(1!==e.skus.length&&console.error("у товара ".concat(t.vendorCode,"(wbId: ").concat(t.nmID,") у размера ").concat(e.techSize,"(").concat(e.wbSize,") количество штрихкодов ").concat(e.skus.length,"!")),{wbId:t.nmID,supplierId:t.vendorCode,sizeWb:e.techSize,barcode:e.skus.join(",")})))),e)),[]);r({filename:"cards",headers:gt,rows:e})}),[t]);return(0,n.jsx)(Me.Z,{onClick:s,children:"Заполнить таблицу штрихкодами карточек"})},vt={sort:{cursor:{limit:1e3},filter:{withPhoto:-1}}},yt=()=>Object.assign(Object.assign({},re),{task:()=>ee.postJson("/content/v1/cards/cursor/list",vt).then((e=>{if(e.error)throw e;return e.data.cards}))}),jt=e=>{const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return Object.keys(t)},wt=()=>new Promise(((e,t)=>{const r=yt();$.addTask(r).then((r=>{const n=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(e=>{const t=[];for(let r=0;r<e.length;r+=90){const n=e.slice(r,r+90);t.push(n)}return t})(jt(t)).map((e=>(e=>Object.assign(Object.assign({},re),{task:()=>(e=>{const t={allowedCategoriesOnly:!1,vendorCodes:[...e]};return ee.postJson("/content/v1/cards/filter",t).then((e=>{if(e.error)throw e;return e.data}))})(e)}))(e)))}(...r.map((e=>e.vendorCode)));$.addTasks(...n).then((t=>{const n=t.reduce(((e,t)=>(e.push(...t),e)),[]);e({fromList:r,byVendorIds:bt(n)})})).catch((e=>{t(e)}))})).catch((e=>{t(e)}))})),bt=e=>{const t=e.reduce(((e,t)=>(e[t.vendorCode]=t,e)),{}),r=[],n=Object.keys(t);for(let e=0;e<n.length;e++)r.push(t[n[e]]);return r},It=e=>{let{apiClientIsReady:t}=e;const{setCards:r,busy:s,setBusy:i}=mt(),a=(0,o.useCallback)((()=>{yt(),i(!0),wt().finally((()=>{i(!1)})).then((e=>{r(e)}))}),[r]),l=!t;return(0,n.jsx)(Me.Z,{onClick:a,disabled:l||s,children:"загрузить карточки"})},St=e=>{let{apiClientIsReady:t}=e;const{cards:r}=mt();return(0,n.jsxs)(ve.Z,{container:!0,spacing:2,sx:{flexDirection:"column",justifyContent:"center"},children:[(0,n.jsxs)(ve.Z,{container:!0,spacing:2,columns:2,sx:{alignItems:"end"},children:[(0,n.jsx)(ve.Z,{xs:1,children:(0,n.jsx)(lt.Z,{label:"Карточек в списке",value:r.fromList.length})}),(0,n.jsx)(ve.Z,{xs:1,children:(0,n.jsx)(lt.Z,{label:"Карточек по коду поставщика",value:r.byVendorIds.length})})]}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(It,{apiClientIsReady:t})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(ft,{cards:r})})]})},Ct="supplies",kt={},Tt={supplies:kt,setSupplies:()=>{},clearSupplies:()=>{},removeSupplies:()=>{},busy:!0,setBusy:()=>{}},Zt=o.createContext(Tt),Et=e=>{let{children:t}=e;const[r,s]=(0,o.useState)(!1),[i,a]=(0,o.useState)((()=>{const e=localStorage.getItem(Ct);if(e)try{return JSON.parse(e)}catch(e){return Tt.supplies}return Tt.supplies})),l=(0,o.useCallback)((()=>{a(kt)}),[a]),c=(0,o.useCallback)((e=>{a((t=>{const r=Object.assign({},t);let n=!1;for(let t=0;t<e.length;t++){const s=e[t];r[s]&&(delete r[s],n=!0)}return n?r:t}))}),[a]),d=(0,o.useCallback)((e=>{a((t=>{const r=Object.assign({},t);return e.forEach((e=>{r[e.id]=e})),r}))}),[a]),u=(0,o.useMemo)((()=>({supplies:i,setSupplies:d,clearSupplies:l,removeSupplies:c,busy:r,setBusy:s})),[i,d,l,c,r,s]);return(0,o.useEffect)((()=>{localStorage.setItem(Ct,JSON.stringify(i))}),[i]),(0,n.jsx)(Zt.Provider,{value:u,children:t})},Ot=o.memo(Et),Pt=()=>(0,o.useContext)(Zt);var At=r(2440),Dt=r(576),Rt=r(6867),Gt=r(8619),Mt=r(8885),Bt=r(2887),_t=r(9334);const Nt=e=>{const t=new Date(e);return"".concat(t.toLocaleTimeString()," ").concat(t.toLocaleDateString())},Ht=e=>{const t=e.reduce(((e,t)=>(e[t.toISOString()]=t,e)),{}),r=[],n=Object.keys(t);for(let e=0;e<n.length;e++)r.push(t[n[e]]);return r};var zt=r(594);const Lt={orderId:{name:"№ задания",order:0,toPrintable:e=>String(e)},supplyId:{name:"QR-код поставки",order:10},sticker:{name:"Стикер",order:15},supplyName:{name:"Название поставки",order:20},orderDate:{name:"Дата создания",order:30,toPrintable:Nt,toExcel:Nt},supplyBarcodeScanDate:{name:"Дата сканирования ШК ТТН",order:40,toPrintable:Nt,toExcel:Nt},name:{name:"Наименование",order:50},sizeTech:{name:"Размер",order:60},color:{name:"Цает",order:70},price:{name:"Стоимость",order:72,toPrintable:e=>(e/100).toFixed(2),toExcel:e=>Number((e/100).toFixed(2))},currency:{name:"Валюта",order:74,toPrintable:e=>643===e?"₽":"?",toExcel:e=>643===e?"₽":"?"},wbId:{name:"Артикул Wildberries",order:80,toPrintable:e=>String(e)},supplierId:{name:"Артикул продавца",order:90},srid:{name:"Srid",order:100}},qt=()=>{const{supplies:e,removeSupplies:t}=Pt(),{exportEnqueue:r}=Xe(),s=(0,o.useMemo)((()=>{const t=Object.keys(e);return t.sort(),t}),[e]),{setData:i}=Ie(),{cards:a}=mt(),[l,c]=o.useState([]),d=(0,o.useMemo)((()=>l.map((t=>e[t]))),[e,l]),u=(0,o.useCallback)((e=>()=>{c((t=>{const r=t.indexOf(e),n=[...t];return-1===r?n.push(e):n.splice(r,1),n}))}),[]),h=(0,o.useMemo)((()=>s.length>0&&s.every((e=>l.indexOf(e)>-1))),[s,l]);return(0,o.useEffect)((()=>{c((e=>e.filter((e=>s.indexOf(e)>-1))))}),[s]),(0,n.jsxs)(ve.Z,{container:!0,spacing:2,sx:{flexDirection:"column",flexGrow:1,flexWrap:"nowrap"},children:[(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1,height:"auto",maxHeight:"10rem"},children:(0,n.jsx)(Ce.Z,{variant:"outlined",sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,n.jsxs)(At.Z,{sx:{width:"100%",height:"100%",overflow:"auto",position:"relative",pt:0},children:[(0,n.jsx)(Dt.ZP,{disablePadding:!0,sx:{position:"sticky",top:0,zIndex:1,bgcolor:"background.paper",py:.5,borderBottom:e=>"1px solid ".concat(e.palette.divider)},secondaryAction:(0,n.jsx)(Rt.Z,{edge:"end",disabled:l.length<1,color:"error",onClick:()=>{t(l)},children:(0,n.jsx)(zt.Z,{})}),children:(0,n.jsxs)(Gt.Z,{role:void 0,onClick:()=>{c(h?[]:s)},dense:!0,sx:{py:.5,my:-.5},children:[(0,n.jsx)(Mt.Z,{children:(0,n.jsx)(Bt.Z,{edge:"start",checked:h,disabled:s.length<1,indeterminate:l.length>0&&!h,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":"all"},sx:{py:0}})}),(0,n.jsx)(_t.Z,{id:"all",primary:"Все"})]})}),s.map((e=>{const t="checkbox-list-label-".concat(e);return(0,n.jsx)(Dt.ZP,{disablePadding:!0,children:(0,n.jsxs)(Gt.Z,{role:void 0,onClick:u(e),dense:!0,sx:{py:0},children:[(0,n.jsx)(Mt.Z,{children:(0,n.jsx)(Bt.Z,{edge:"start",checked:-1!==l.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t},sx:{py:0}})}),(0,n.jsx)(_t.Z,{id:t,primary:e})]})},e)}))]})})}),(0,n.jsxs)(ve.Z,{container:!0,children:[(0,n.jsx)(ve.Z,{sx:{flexGrow:1},children:(0,n.jsx)(Me.Z,{disabled:l.length<1,onClick:()=>{let e;1===d.length&&(e="Данные о поставке ".concat(d[0].id)),d.length>1&&(e="Данные о поставках ".concat(d.map((e=>e.id)).join(","))),i({filename:e,headers:Lt,rows:Ft(d,a)})},children:"в таблицу"})}),(0,n.jsx)(ve.Z,{sx:{flexGrow:1},children:(0,n.jsx)(Me.Z,{disabled:l.length<1,onClick:()=>{d.forEach((e=>{r({filename:"Данные о поставке ".concat(e.id),headers:Lt,rows:Ft([e],a)}).catch((e=>{console.error(e)}))}))},children:"экспорт по файлам"})})]})]})},Ft=(e,t)=>{const r=e.reduce(((e,r)=>(e.push(...r.orders.map((e=>{const n=t.fromList.filter((t=>t.nmID===e.supply.nmId));if(1!==n.length)throw console.error(n),new Error("error getting card from list: supplierId: ".concat(e.supply.article,", wbId: ").concat(e.supply.nmId));const s=n[0],o=t.byVendorIds.filter((t=>t.nmID===e.supply.nmId));if(1!==o.length)throw console.error(o),new Error("error getting card by vendor id: supplierId: ".concat(e.supply.article,", wbId: ").concat(e.supply.nmId));const i=o[0],a=s.sizes.filter((t=>t.chrtID===e.supply.chrtId));if(1!==a.length)throw console.error(a),new Error("error getting size of card from list: supplierId: ".concat(e.supply.article,", wbId: ").concat(e.supply.nmId,", chrtId: ").concat(e.supply.chrtId));const l=a[0],c=i.sizes.filter((t=>t.chrtID===e.supply.chrtId));if(1!==c.length)throw console.error(c),new Error("error getting size of card from list: supplierId: ".concat(e.supply.article,", wbId: ").concat(e.supply.nmId,", chrtId: ").concat(e.supply.chrtId));const d=i.characteristics.filter((e=>"Наименование"in e)),u=d[0]?d[0]["Наименование"]:"",h=i.characteristics.filter((e=>"Цвет"in e)),p=h[0]?h[0]["Цвет"].join(", "):"";return{supplyId:r.id,supplyName:r.name,supplyBarcodeScanDate:r.scanDt,orderDate:e.supply.createdAt,orderId:e.supply.id,price:e.supply.convertedPrice,currency:e.supply.convertedCurrencyCode,supplierId:e.supply.article,wbId:e.supply.nmId,name:u,color:p,sizeTech:l.techSize,sticker:e.statistics.sticker,srid:e.statistics.srid}}))),e)),[]);return r.sort(((e,t)=>e.supplyId<t.supplyId?-1:e.supplyId>t.supplyId||e.orderId<t.orderId?1:e.orderId>t.orderId?-1:0)),r},Kt=e=>Object.assign(Object.assign({},re),{task:()=>(e=>ee.getJson("/api/v3/supplies/".concat(e)))(e)}),Jt=e=>Object.assign(Object.assign({},re),{task:()=>(e=>ee.getJson("/api/v3/supplies/".concat(e,"/orders")).then((e=>e.orders)))(e)}),Ut=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,Qt=/(WB-GI-[0-9]{5,})/g,Wt=e=>{var t;return null!==(t=e.match(Qt))&&void 0!==t?t:[]},Yt=e=>{let{apiClientIsReady:t,apiStatisticsClientIsReady:r}=e;const{setSupplies:s,busy:i,setBusy:a}=Pt(),[l,c]=(0,o.useState)(""),d=(0,o.useMemo)((()=>jt(Wt(l))),[l,Wt]),u=!t||!r;return(0,n.jsxs)(ve.Z,{container:!0,spacing:2,sx:{flexDirection:"column",flexGrow:1},children:[(0,n.jsxs)(ve.Z,{container:!0,sx:{flexGrow:1},children:[(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(lt.Z,{label:"ID поставки",multiline:!0,value:l,onChange:e=>{c(e.target.value)},sx:{"& .MuiInputBase-multiline":{height:"100%",overflow:"auto","& textarea":{height:"100% !important",overflow:"visible !important"}}}})}),(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(lt.Z,{label:"ID поставки обработанные",multiline:!0,value:d.join("\r\n"),sx:{"& .MuiInputBase-multiline":{height:"100%",overflow:"auto","& textarea":{height:"100% !important",overflow:"visible !important"}}}})})]}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(Me.Z,{onClick:()=>{a(!0),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<1?Promise.resolve([]):Promise.all(jt(t).map((e=>(e=>e?new Promise(((t,r)=>{const n=[Kt(e),Jt(e)];$.addTasks(...n).then((e=>{let[r,n]=e;t(Object.assign(Object.assign({},r),{orders:n}))})).catch((e=>{r(e)}))})):Promise.reject(new Error("no supply id passed")))(e).catch((t=>(console.error("не удалось загрузить поствку ".concat(e,", причина:"),t),null)))))).then((e=>e.filter((e=>null!==e))))}(...d).then((e=>{if(e.length<1)throw new Error("ни одной поставки не загружено");const t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.reduce(((e,t)=>{const r=t.orders.map((e=>e.createdAt)).map((e=>{const t=new Date(e);return t.setUTCHours(0,0,0,0),t})),n=Ht(r).reduce(((e,t)=>{const r=new Date(t.toISOString());r.setUTCDate(r.getUTCDate()-1);const n=new Date(t.toISOString());return n.setUTCDate(n.getUTCDate()+1),e.push(t),e.push(r),e.push(n),e}),[]);return e.push(...n),e}),[]);return Ht(n)}(...e).filter((e=>!isNaN(e.getTime())));if(t.length<1)throw new Error("ни одной даты заказа не получено");(e=>{const t=e.map((e=>{return{date:e,task:(t=e,Object.assign(Object.assign({},ne),{apiRouteGroup:"/api/v1/supplier/orders",task:()=>(e=>{const t=new Date(e.toISOString());t.setUTCHours(0,0,0,0);const r=t.toISOString().split("T")[0];if(!r.match(Ut))throw new Error("invalid date for order request");return te.getJson("/api/v1/supplier/orders",{dateFrom:r,flag:"1"})})(t)}))};var t})).map((e=>$.addTask(e.task).catch((t=>(console.error("не удалось загрузить заказы из статистики на дату ".concat(e.date.toISOString(),", причина:"),t),null)))));return Promise.all(t).then((e=>e.reduce(((e,t)=>(null!==t&&e.push(...t),e)),[])))})(t).finally((()=>{a(!1)})).then((t=>{s(e.reduce(((e,r)=>{const n=[];for(let s=0;s<r.orders.length;s++){const o=r.orders[s],i=t.filter((e=>e.srid===o.rid));if(i.length<1)return console.error("заказ из раздела статистики не неайден"),e;if(i.length>1)return console.error("соответствующих заказов из раздела статистики более одного:",i),e;const a=i[0];n.push({supply:o,statistics:a})}return e.push(Object.assign(Object.assign({},r),{orders:n})),e}),[]))})).catch((e=>{console.error(e)}))})).catch((e=>{console.error("ошибка загрузки данных поставок, причина:",e),a(!1)}))},disabled:u||i||d.length<1,children:"загрузить данные о поставке"})})]})},Vt=[],Xt={supplies:Vt,setSupplies:()=>{},busy:!0,setBusy:()=>{}},$t=o.createContext(Xt),er=e=>{let{children:t}=e;const[r,s]=(0,o.useState)(!1),[i,a]=(0,o.useState)(Vt),l=(0,o.useMemo)((()=>({supplies:i,setSupplies:a,busy:r,setBusy:s})),[i,a,r,s]);return(0,n.jsx)($t.Provider,{value:l,children:t})},tr=o.memo(er),rr=()=>(0,o.useContext)($t),nr=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).then((r=>(t.push(...r.supplies),0!==r.next?nr(e,r.next,t):Promise.resolve(t))))},sr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return $.addTask(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object.assign(Object.assign({},re),{task:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return ee.getJson("/api/v3/supplies",{limit:String(1e3),next:e.toString()})}(e)})}(e))},or=e=>{let{apiClientIsReady:t}=e;const{supplies:r,setSupplies:s,busy:o,setBusy:i}=rr();return(0,n.jsxs)(ve.Z,{container:!0,spacing:2,sx:{flexDirection:"column",flexGrow:1},children:[(0,n.jsx)(ve.Z,{sx:{display:"flex"},children:(0,n.jsx)(lt.Z,{label:"Загружено поставок",value:r.length})}),(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(Me.Z,{onClick:()=>{i(!0),nr(sr).finally((()=>{i(!1)})).then((e=>{s(e)})).catch((e=>{console.error(e)}))},disabled:!t||o,children:"Загрузить поставки"})})]})},ir=["признак отсутствует","обычная","СГТ (Содержит сверхгабаритные товары)","КГТ (Содержит крупногабаритные товары). Не используется на данный момент"],ar={id:{name:"QR-код поставки",order:0},name:{name:"Наименование",order:10},createdAt:{name:"Дата создания",order:20,toPrintable:Nt,toExcel:Nt},closedAt:{name:"Дата закрытия",order:30,toPrintable:Nt,toExcel:Nt},scanDt:{name:"Дата сканирования ШК ТТН",order:40,toPrintable:Nt,toExcel:Nt},scanDtDate:{name:"Дата сканирования ШК ТТН",order:40,toPrintable:Nt,toExcel:e=>new Date(e),width:15},done:{name:"Завершена",order:50,toPrintable:e=>e?"ИСТИНА":"ЛОЖЬ",toExcel:e=>e?"ИСТИНА":"ЛОЖЬ"},cargoType:{name:"Тип поставки",order:60,toPrintable:e=>ir[e],toExcel:e=>ir[e]}},lr=()=>{const{supplies:e}=rr(),{setData:t}=Ie();return(0,n.jsx)(Me.Z,{onClick:()=>{const r=e.map((e=>Object.assign(Object.assign({},e),{scanDtDate:e.scanDt})));r.sort(((e,t)=>{const r=new Date(e.createdAt),n=new Date(t.createdAt);return r<n?-1:r>n?1:0})),t({filename:"Список поставок",headers:ar,rows:r})},children:"в таблицу"})},cr=e=>{let{apiClientIsReady:t,apiStatisticsClientIsReady:r}=e;return(0,n.jsxs)(ve.Z,{container:!0,spacing:2,children:[(0,n.jsxs)(ve.Z,{container:!0,sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(or,{apiClientIsReady:t})}),(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(lr,{})})]}),(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(Yt,{apiClientIsReady:t,apiStatisticsClientIsReady:r})}),(0,n.jsx)(ve.Z,{sx:{display:"flex",flexGrow:1},children:(0,n.jsx)(qt,{})})]})},dr=[{path:"/",Component:()=>(0,n.jsxs)(ve.Z,{container:!0,spacing:2,disableEqualOverflow:!0,sx:{flexDirection:"column",flexGrow:1,overflow:"hidden",p:2},children:[(0,n.jsx)(ve.Z,{children:(0,n.jsx)(it.Z,{sx:{mx:-2,mt:-2},children:(0,n.jsx)(ot,{})})}),(0,n.jsx)(ve.Z,{children:(0,n.jsx)(fe.j3,{})}),(0,n.jsx)(ve.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",width:"100%"},children:(0,n.jsx)(tt,{})})]}),ErrorBoundary:at,children:[{ErrorBoundary:at,children:[{index:!0,element:(0,n.jsx)(fe.Fg,{to:"/api_config"})},{name:"Настройки",order:999,path:"api_config",Component:()=>(0,n.jsx)(ct,{})},{name:"Карточки",order:2,path:"cards",Component:()=>{const{apiClientReady:e}=me();return(0,n.jsx)(St,{apiClientIsReady:e})}},{name:"Поставки",order:1,path:"supply",Component:()=>{const{apiClientReady:e,apiStatisticsClientReady:t}=me();return(0,n.jsx)(cr,{apiClientIsReady:e,apiStatisticsClientIsReady:t})}},{path:"*",Component:()=>(0,n.jsxs)(nt.Z,{variant:"h6",children:["Такой страницы не существует",(0,n.jsx)(ge.OL,{to:"/",children:"На главную"})]})}]}]}],ur=Object.keys({caseSensitive:"caseSensitive",path:"path",id:"id",loader:"loader",action:"action",hasErrorBoundary:"hasErrorBoundary",shouldRevalidate:"shouldRevalidate",handle:"handle",index:"index",children:"children",element:"element",errorElement:"errorElement",Component:"Component",ErrorBoundary:"ErrorBoundary",lazy:"lazy"}),hr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce(((e,r)=>{var n;const s=null!==(n=r.path)&&void 0!==n?n:"",o="/"===s.substring(0,1)?s:"/"===t.substring(t.length-1)?t+s:t+"/"+s,i=Object.keys(r),a={};let l=!1;for(let e=0;e<i.length;e++)ur.indexOf(i[e])<0&&(a[i[e]]=r[i[e]],l=!0);if(l&&(a.path=o,e.push(a)),r.children){const t=hr(r.children,o);t.length&&e.push(...t)}return e}),[])},pr=e=>{var t;const r={};for(let n=0;n<e.length;n++){const s=null!==(t=e[n].menuId)&&void 0!==t?t:e[n].path;if(r[s])throw new Error('duplicate menu item id "'+s+'" found!');r[s]=e[n]}for(const e in r){if(!Object.hasOwn(r,e))continue;const t=r[e].parentId;if(t){if(t==e)throw new Error('circular reference id to parent id "'+t+'" found in menu');if(!r[t])throw new Error('no parent id "'+t+'" found in menu');const n=r[t];n.children||(n.children=[]),n.children.push(r[e])}}const n=[];for(const e in r)Object.hasOwn(r,e)&&(r[e].parentId||n.push(r[e]));return n},xr=e=>e.map((e=>{const{parentId:t,children:r,menuId:n}=e,s=(0,Se._T)(e,["parentId","children","menuId"]);return void 0!==n&&(s.id=n),e.children&&(s.children=xr(e.children)),s})),mr=e=>{const t=e.toSorted(gr);for(let e=0;e<t.length;e++)t[e].children&&(t[e].children=mr(t[e].children));return t},gr=(e,t)=>{var r,n;const s=null!==(r=e.order)&&void 0!==r?r:0,o=null!==(n=t.order)&&void 0!==n?n:0;return s>o?1:o>s?-1:e.id>t.id?1:t.id>e.id?-1:e.name>t.name?1:t.name>e.name?-1:0},fr=e=>e.map((e=>{const t={};for(let r=0;r<ur.length;r++){const n=ur[r];n in e&&(t[n]=e[n])}return"children"in e&&(t.children=fr(e.children)),t})),vr=fr,yr=o.createContext([]),jr=o.createContext([]),wr=vr(dr),br=(e=>{const t=hr(e),r=pr(t),n=xr(r);return mr(n)})(dr),Ir=(0,ge.cP)(wr),Sr=()=>(0,n.jsx)(yr.Provider,{value:wr,children:(0,n.jsx)(jr.Provider,{value:br,children:(0,n.jsx)(ge.pG,{router:Ir})})}),Cr=()=>(0,o.useContext)(jr);var kr=r(9164),Tr=r(6720),Zr=r(1796),Er=r(9617);const Or=function(){const e="#9398f2",t={palette:{mode:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",primary:{main:e,contrastText:"#fff"},text:{primary:(0,Zr._j)(e,.15),secondary:(0,Zr._j)(e,.3),disabled:(0,Zr.Fq)(e,.5)},divider:(0,Zr.Fq)(e,.5),action:{hover:(0,Zr.Fq)(e,.15)}}},r=(0,Er.Z)(t),n={components:{MuiButton:{defaultProps:{variant:"contained",size:"small",fullWidth:!0}},MuiTextField:{defaultProps:{variant:"outlined",size:"small",fullWidth:!0}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:r.palette.divider}}},MuiPaper:{defaultProps:{elevation:5}},MuiTablePagination:{styleOverrides:{toolbar:{display:"flex",flexWrap:"wrap",justifyContent:"end"}}}}};return(0,Er.Z)(r,n)}(),Pr=e=>{let{children:t=null}=e;return(0,n.jsxs)(kr.Z,{theme:Or,children:[(0,n.jsx)(Tr.ZP,{}),t]})};(0,s.s)(document.getElementById("root")).render((0,n.jsx)(o.StrictMode,{children:(0,n.jsx)((()=>(0,n.jsx)(Pr,{children:(0,n.jsx)(Ve,{children:(0,n.jsx)(xe,{children:(0,n.jsx)(be,{children:(0,n.jsx)(xt,{children:(0,n.jsx)(Ot,{children:(0,n.jsx)(tr,{children:(0,n.jsx)(Sr,{})})})})})})})})),{})}))},1424:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(8081),s=r.n(n),o=r(3645),i=r.n(o)()(s());i.push([e.id,"* {\n    box-sizing: border-box;\n}\n\nhtml, body {\n    height: 100%;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n}\n\ndiv#root {\n    min-height: 100%;\n    height: auto;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n}\n\nbody {\n    -webkit-user-select: none;\n    -moz-user-select: -moz-none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\ninput,\ntextarea,\nli *,\ntable {\n    -moz-user-select: text;\n    user-select: text;\n}\n",""]);const a=i}},e=>{e.O(0,[514,7],(()=>(2227,e(e.s=2227)))),e.O()}]);